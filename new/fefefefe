import com.launchdarkly.eventsource.EventSource
import com.launchdarkly.eventsource.EventHandler
import com.launchdarkly.eventsource.MessageEvent

// Your custom logic here to handle SSE events
def eventHandler = new EventHandler() {
    void onOpen(EventSource eventSource) {
        // Handle connection open
    }

    void onMessage(String event, MessageEvent messageEvent) {
        // Handle incoming SSE message
        log.info("Received SSE message: " + messageEvent.data)
    }

    void onError(Throwable t) {
        // Handle errors
    }

    void onClosed(EventSource eventSource) {
        // Handle connection closed
    }
}

// Initialize EventSource with your SSE endpoint
def eventSource = new EventSource.Builder("your_sse_endpoint")
    .eventHandler(eventHandler)
    .build()

// Start listening to SSE events
eventSource.start()
